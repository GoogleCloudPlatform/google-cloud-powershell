# PowerShell Cmdlet Reference Website

This folder contains a [Jekyll](https://jekyllrb.com/)-powered website for
providing basic documentation for PowerShell cmdlets.

The website is published at
http://googlecloudplatform.github.io/google-cloud-powershell. The content is
served directly from the `gh-pages` branch using the GitHub Pages feature.

One major source of confusion is that there are actually *two* websites. First,
the landing page (index.html) is rendered via an Angular application. The source
code for that is found at http://github.com/googlecloudplatform/gcloud-common.
However, the cmdlet reference and its content is generated via Jekyll.

## Setup

To run the website, you need to install Ruby and Jekyll.

    choco install ruby -y
    gem install jekyll

Once installed, you can run the website by CDing into the `website` directory
and run:

    jekyll serve . --watch

## Generating Data

The cmdlet data is generated by `Tools\GenerateWebsiteData.ps1`. The script will
load the latest `Google.PowerShell.dll` assembly (in `bin\Debug`) and create
a `cmdlets.json` containing all of the `Get-Help` documentation.

Copy the new `cmdlets.json` file into the `website\_data` folder. Jekyll will
regenerate the website, which will in-turn create new HTML pages for each
cmdlet.

## Publishing

To publish the new website, copy the contents of `website\_site` into a
temporary folder on your machine. Then, use `git` to change to the `gh-pages`
branch of the `gcloud-powershell` repo.

Now copy the contents of the `_site` folder and overwrite the existing branch's
contents.

Finally, push the new branch to the remote: ` git push origin gh-pages`.
